{
	"variables": [],
	"info": {
		"name": "Jenkins_Collection",
		"_postman_id": "b9b16b7c-5900-bb88-4ba6-3ff897fa50f7",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "certona title change postman automated",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"// activate https://marketer.monetate.net/control/a-24f48522/d/adidas.glass/experience/882290",
							"",
							"var jsonData = pm.response.json();",
							"",
							"// -- basic test, need to be checked for every request    ",
							"pm.test(\"Response is OK (200)\", function () {",
							"    pm.response.to.have.status(200);",
							"    pm.expect(jsonData.meta.code).to.eql(200);",
							"});",
							"",
							"pm.test(\"Response is not empty\", function () {",
							"    pm.expect(jsonData.data.responses.length).to.eql(1);",
							"});",
							"",
							"pm.test(\"Response does not have errors\", function () {",
							"    pm.expect(jsonData.meta.errors).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Response contains only 1 CMS Action\", function () {",
							"    var count_cmsAction = _.size(_.chain(jsonData)",
							"                            .result('data')",
							"                            .result('responses')",
							"                            .first()",
							"                            .result('actions')",
							"                            .where({actionType : \"monetate:action:CmsAction\"})",
							"                            .value());",
							"    ",
							"    pm.expect(count_cmsAction).to.eql(1);",
							"});",
							"",
							"pm.test(\"Response contains reporting\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.data.responses[0].actions[0].impressionReporting).to.exist;",
							"});",
							"",
							"// -- basic test end",
							"// -- basic test NEED ADJUSTMENT, need to be checked for every request ",
							"",
							"",
							"pm.test(\"check uri\", function(){",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.uri).to.eql(\"/enFI/dot-com/products/default-page.html\");",
							"});",
							"",
							"pm.test(\"Response contains only 0 omni json Action\", function () {",
							"    var count_cmsAction = _.size(_.chain(jsonData)",
							"                            .result('data')",
							"                            .result('responses')",
							"                            .first()",
							"                            .result('actions')",
							"                            .where({actionType : \"monetate:action:OmnichannelJson\"})",
							"                            .value());",
							"    ",
							"    pm.expect(count_cmsAction).to.eql(2);",
							"});",
							"",
							"// -- basic test  NEED ADJUSTMENT end",
							"",
							"",
							"",
							"",
							"",
							"/*--Test block for single XP \"HP adding elements for Group A\"--*/",
							"",
							"pm.test(\"Response reports more than one experience\", function () {",
							"    pm.expect(jsonData.data.responses[0].actions[2].impressionReporting.length).to.eql(2);",
							"});",
							"",
							"pm.test(\"Response contains the correct XP for this user\", function () {",
							"    pm.expect(jsonData.data.responses[0].actions[0].impressionReporting[0].experience_label).to.eql(\"PDP-ATP1234_904895\");",
							"});",
							"",
							"pm.test(\"Title name change certona\", function () {",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.component_presentations[1].component.content_fields.title).to.eql(\"Default Football_renamed\");",
							"});",
							"",
							"pm.test(\"Component type certona exist\", function () {",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.component_presentations[0].component.component_type).to.eql(\"Core Schema - Certona\");",
							"});",
							"",
							"/*",
							"pm.test(\"Masthead Carousel has 4 elements\", function () {",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.component_presentations[1].component.content_fields.length).to.eql(4);",
							"});",
							"",
							"pm.test(\"Teaser Block has 3 elements\", function () {",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.component_presentations[2].component.content_fields.items.length).to.eql(3);",
							"});",
							"",
							"pm.test(\"4th Masthead in Masthead Carousel is 'Here to Create' with id tcm:148-245034\", function () {",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.component_presentations[1].component.content_fields.items[3].title).to.eql(\"HERE TO CREATE\");",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.component_presentations[1].component.content_fields.items[3].id).to.eql(\"tcm:148-245034\");",
							"});",
							"",
							"pm.test(\"3rd Teaser in Teaser Block is 'Terrex' with id tcm:148-245034\", function () {",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.component_presentations[2].component.content_fields.items[2].title).to.eql(\"ADIDAS OUTDOOR TERREX\");",
							"    pm.expect(jsonData.data.responses[0].actions[2].data.component_presentations[2].component.content_fields.items[2].id).to.eql(\"tcm:148-117147\");",
							"});",
							"*/",
							"",
							"pm.test(\"Experience id label presence\", function () {",
							"    //experience_id",
							"    pm.expect(jsonData.data.responses[0].actions[0].impressionReporting[0].experience_id).to.exist;",
							"    ",
							"    //experience_label",
							"    pm.expect(jsonData.data.responses[0].actions[0].impressionReporting[0].experience_label).to.exist;",
							"    ",
							"    //variant_label",
							"    pm.expect(jsonData.data.responses[0].actions[0].impressionReporting[0].variant_label).to.exist;",
							"    ",
							"    //isControl",
							"    pm.expect(jsonData.data.responses[0].actions[0].impressionReporting[0].is_control).to.exist;",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"url": " https://integration-api.monetate.org/api/engine/v1/decide/adidas",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"events\": [\r\n    {\r\n      \"eventType\": \"monetate:decision:DecisionRequest\", \r\n      \"account\": \"a-24f48522\", \r\n      \"requestId\": \"11111\", \r\n      \"domain\": \"adidas.glass\", \r\n      \"instance\": \"d\",\r\n      \"includeReporting\": true,\r\n      \"actionTypes\":[]\r\n    },\r\n    {\r\n        \"eventType\": \"monetate:context:PageView\",\r\n        \"pageType\": \"pdp\",\r\n        \"path\": \"/eqt-support-adv-shoes/BB1306.html\"\r\n    },    \r\n    {\r\n        \"eventType\": \"monetate:context:Metadata\",\r\n        \"metadata\": {\r\n                        \"cms_endpoint_path\":\"/pdp/\",\r\n            \"publication_path\": \"/enFI\",\r\n            \"url\": \"/dot-com/products/eqt-support-adv-shoes/BB1306.html\",\r\n            \"product_attributes\": \"(id:BB1306|model_number:BEM84|product_type:inline|sport:Lifestyle|category:Shoes|gender:U|brand:Originals|productType:Trainers|sportSub:EQT)\",\r\n            \"default_page\":\"/dot-com/products/default-page.html\"\r\n        }\r\n    }\r\n  ]\r\n}\r\n"
				},
				"description": ""
			},
			"response": []
		}
	]
}